[English](README.md) | [简体中文](README.zh.md)

# Mini-NanoGPT - `database` 分支

## 📌 项目简介

**Mini-NanoGPT** 是基于 Karpathy 的 [nanoGPT](https://github.com/karpathy/nanoGPT) 项目的轻量可视化训练平台，旨在让深度学习初学者、研究者与开发者通过直观的图形界面，快速掌握 GPT 模型的训练流程。

本分支 `database` 在原有功能之上，新增 **模型管理数据库支持**，以实现模型元信息、训练配置、推理参数与运行历史的统一存储与追踪，大幅提升了实验管理的系统性和可扩展性。

---

## 🚀 分支亮点：Database 特性

### ✅ 模型注册与持久化追踪

* 引入 **SQLite 数据库**，通过 `DBManager` 为每个新建模型自动分配唯一 ID，并记录模型名称、创建时间、路径等元信息。
* 所有模型元数据集中管理，便于检索与状态维护。

### ✅ 配置、运行与文件

* 自动保存训练时的 **超参数配置**、**日志路径**、**推理参数** 和 **生成历史**。
* 支持参数回溯、实验恢复、自动填写界面表单，可复现训练。
* 自动创建模型目录结构（如 `out/{模型名}_{模型ID}`，`data/{模型名}_{模型ID}`）。

### ✅ 可视化模型管理界面

* 前端新增**模型管理**标签：

  * 可视化浏览所有模型列表（名称 + ID）
  * 支持新增、切换、刷新与删除模型，操作全程与数据库联动。
* 所有前端操作均通过 `DBManager` 保持后端数据与界面状态一致。

> ⚠️ 注意：该分支仅新增模型数据库与管理功能，训练与推理流程本身未作改动，详见主分支文档。

---

## 🧪 快速开始

```bash
pip install -r requirements.txt
python main.py
```

训练与推理过程中涉及的模型注册、配置存储等操作，均可在源码 `DBManager` 中查看具体实现。

---

## 📁 文件结构说明

### `db_manager.py`（核心模块）

封装 `DBManager` 类，职责如下：

* 初始化 SQLite 数据库，创建：

  * 模型信息表
  * 训练配置表
  * 日志路径表
  * 推理参数与历史记录表
* 提供核心方法：

  * `register_model`：注册新模型
  * `rename_model`：重命名模型并同步更新文件夹
  * `delete_model`：删除模型及相关目录
  * `get_model_basic_info` / `get_all_models`：查询模型信息
  * 保存 / 读取训练与推理配置、历史记录等

该模块确保数据库记录与文件系统的状态始终一致，降低手动维护成本，提升可靠性。

---

### `main.py`（主入口）

集成数据库管理的主控逻辑：

* 在数据加载、模型训练、推理等阶段，嵌入 `DBManager` 的接口调用，实现模型信息的自动注册与配置存储。
* 前端界面扩展了 **“模型管理”** 标签页，通过 Gradio 实现对数据库中模型的操作交互。

---
